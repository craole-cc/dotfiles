#!/bin/sh
# shellcheck disable=SC1090,SC1091
# DOC: This script is used to initialize the dotfiles via a list of selected modules.
VERBOSE=false

#@ Ensure the dotfiles exist
[ -d "${DOTS}" ] || return 1

#@ Establish the modules directory
DOTS_MOD="${DOTS}/Modules"

#@ Initialize the modules individually
modules_to_activate="
  profile
  display
  prompt
  # fonts
  # config
  # keys
  # autostart
  # shell
"

#@ Initialize each module
while IFS= read -r module; do

    #@ Remove leading/trailing whitespace
    module=$(printf "%s" "${module}" | tr -d '[:blank:]')

    #@ Initialize selected modules by skipping commented modules
    case ${module} in
              *[![:alnum:]]*) ;;
            *)
             [ -n "${module}" ] && {
              printf "Loading the %s module... " "${module}"
              . "${DOTS}/Modules/${module}"
              printf "complete\n"
              }
               ;;
    esac

done <<< "${modules_to_activate}"

#@ Print success message
[ "$VERBOSE" = true ] && printf "DOTS=[%s]\n" "$DOTS"

if type INFor >/dev/null 2>&1; then
  INFor
else
  exit
fi
return 0
